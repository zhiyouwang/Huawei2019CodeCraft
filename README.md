# 任务书摘要

## 系统设定

+ 路口完全互联。不考虑车辆在路口的通行时间。
+ 行驶途中不允许超车变道。车速过慢会阻塞后方车辆。
+ 每条车道均可直行、左转、右转，不受车道编号的影响
+ 车辆进入车道之后，即按道路允许的最高速度行使
+ 若有多辆车同时出发，则车辆编号小者先行。
+ 优先调度正在运行的车辆，其次到等待上路的车辆。即道路上所有车辆都不可行驶后再调度等待上路行驶的车辆。
+ 调度等待上路行驶的车辆，按等待车辆 ID 升序进行调度，优先进入小号的车道。
+ 在同一路口排队的车辆，按照到达实时间先后进入道路。若多辆车在同一时刻到达，则按如下规则调度：
  + 车道编号小先走（如何定义车道号）
  + 直行车辆 - 左转车辆 - 右转车辆，必须是前者通行完毕，后者才可通行
  + 车辆进入道路时，进入车道的顺序是从车道号小的车道进入。从小到大排序。
  + 调度时，每车道前排车辆优先通行。所处车道号小的车辆优先通行。
+ 车辆通过路口进入下一条道路时的可行驶速度计算：在下一条道路行使的距离 = 下一条道路的最大可行使速度 - 在当前道路的行使距离（若计算结果小于等于 0，则无法进入下一条道路）
+ 同路口多条道路按各条道路的 ID 升序进行循环调度车辆行驶。整个系统按路口 ID 升序顺序循环调度。
+ 编译时间限制未 60s。程序由开始运行到生成 answer.txt 为止不得超过 300s。
+ 路口向量顺时针表示。

## 判题系统的处理逻辑

车辆状态包括：等待，运行，终止。

在每次调度中，调度到的车辆要么行驶其可行驶的最大车速，要么就会因等待其他车辆行驶而处于等待行驶状态，待所等待行驶的车辆行驶后，再使该车辆行驶其可行驶的最大车速。是否发生冲突，只与相关道路的第一优先级车辆的行驶方向进行比较，看是否发生冲突。每条道路如果当前道路第一优先级车辆不能行驶，则当前道路后面的的车辆都不能行驶，只有第一优先级的车辆行驶了，后面第二优先级才可以确定是否可以行驶。

一个时间单位内，一次调度时7与8的调度会出现多次重复调度，因每次调度有可能因为等待其他道路车辆的行驶而导致当前车辆无法行驶，因此会循环调度使所有车辆行驶一个时间单位。每次调度到一条道路，直到该道路无车辆可调度，或该条道路上车辆处于冲突状态。也就是说尽可能多地让该道路上的车辆行驶，直到没有车辆或者车辆与其他车辆发生冲突不可行驶。如果本次循环因冲突失去调度权限，则需要等下一次循环，此道路才会获得调度权限。当一个条道路获得调度权限时，尽可能多地让此道路的车辆进行行驶。依次按道路ID升序调度该路口所连接的所有道路，再次循环该路口下所有道路，直到所有道路车辆全部处于终态。

在一个路口会循环调度所有道路，直到所有道路都没有车辆可供调度（全部处于终止状态）。

### 处理正在道路上运行的车辆

+ 扫描车辆列表，对前方没有阻挡，并且可以出路口的车辆标，会被记为等待行驶的车辆。
+ 如果车辆在行驶过程中，前方没有阻挡但不会出路口的车辆，则行驶到最远可达位置，并标记为终止状态。
+ 如果前面有车辆阻挡，且阻挡的车辆处于等待状态，则该车被标记为等待状态。
+ 如果前面有车辆阻挡，且阻挡的车辆处于终止状态，则该车被标记未终止状态，并向前行使最远距离。
+ 遍历道路上车辆从第一排向最后一排进行便利，确定每辆车的行使状态。出道路方向为第一排，入道路方向为最后一排。

### 处理所有路口、道路中处于等待状态的车辆

系统按照路口 ID 升序调度所有路口。路口内各道路按道路 ID 升序调度。在每个路口遍历道路时，只调度该道路驶入路口的方向。

如图所示则调度路口5时，只调度道路500从路口6到路口5的方向；调度路口6时，只调度道路500从路口5到路口6的方向。如：   
路口5 <-----500------  路口6  
路口5 ------500----->  路口6  
道路500的起始点为路口5，终止点为路口6   



## 评分规则

+ 系统调度时间短者胜出（系统开始调度到全部车辆到达目的地时间）
+ 若调度时间相等，则车辆总行使用时少者胜出（到达时间 - 计划出发时间 = 总行使用时）。
+ 若车辆总行使用时时间相等，则系统计算出规划方案时间少者胜出（计算运行的实际时间为  ms）
+ 若以上相同，则先提交代码者胜出
+ 不能堵死路口，堵死者铺判负